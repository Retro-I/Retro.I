[Unit]
Description=Retro.I Desktop App
After=graphical.target

[Service]
Type=simple
User=pi
Group=pi
WorkingDirectory=$RETROI_DIR
ExecStart=$RETROI_DIR/.venv/bin/python $RETROI_DIR/main.py
Restart=always
Environment=DISPLAY=:0
Environment=XAUTHORITY=/home/pi/.Xauthority
Environment=XDG_RUNTIME_DIR=/run/user/$user_id
Environment=PULSE_SERVER=unix:/run/user/$user_id/pulse/native

[Install]
WantedBy=graphical.target